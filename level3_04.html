<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8" />
    <title>關卡三｜結算畫面 1</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <link rel="stylesheet" href="./css/level3.css" />
    <style>
      /* 背景：先以 1280×720 為預設（你有其他尺寸就像前面一樣用 media query 覆寫） */
      .bg-end-01 {
        background: #fff url("../image/1280x720/end-01.png") center/cover
          no-repeat;
      }

      /* 讓 result-wrap 撐滿舞台，給絕對定位一個「有高度」的參考區域 */
      .result-wrap {
        position: absolute; /* 填滿 .game-wrap */
        inset: 0;
        display: block;
        padding: 0;
      }

      /* 這個可留可刪，只是避免 grid 影響排版 */
      .cols {
        display: contents;
      }

      /* 字型樣式自己要的就留，這裡先簡單設一個 */
      .num {
        margin: 0;
        font-size: clamp(28px, 4.6vw, 56px);
        color: #1461ff;
        font-weight: 800;
      }
      .total {
        margin: 0;
        font-size: 50px;
        color: #1461ff;
        font-weight: 800;
      }

      /* 三個數字改為各自絕對定位（以 .result-wrap 為基準） */
      #num-cut,
      #num-add,
      .total {
        position: absolute;
        transform: translate(-50%, -50%);
        z-index: 5;
      }
    </style>
  </head>
  <body>
    <div class="game-wrap bg-end-01">
      <div class="result-wrap">
        <!-- 上方標題在背景圖中，這裡只放數據 -->
        <div class="cols">
          <div class="card">
            <div class="num" id="num-cut">0</div>
          </div>
          <div class="card">
            <div class="num" id="num-add">0</div>
          </div>
        </div>
        <div class="total"><span id="num-total">0</span></div>
      </div>
    </div>

    <!-- 下方按鈕 -->
    <div class="btn-row">
      <button class="img-btn" id="btn-confirm-4">
        <img src="./image/check_off.png" alt="下一頁" />
      </button>
    </div>

    <div class="rotate-mask" id="rotateMask">
      <div class="rotate-box"><p>請將裝置旋轉為橫向以獲得最佳體驗</p></div>
    </div>

    <script src="./js/level3.js"></script>
    <script>
      requireCookieOrBack("level3_01", "./level3_01.html");
      requireCookieOrBack("level3_02", "./level3_02.html");
      handleOrientationMask();

      // 沒有分數就導回遊戲
      const total = Number(getCookie("level3_score"));
      if (Number.isNaN(total)) location.replace("./level3_03.html");

      // 讀取各數值
      const addSum = Number(getCookie("level3_add_sum")) || 0;
      const cutAbs = Number(getCookie("level3_cut_sum_abs")) || 0;

      // 填入
      document.getElementById("num-add").textContent = addSum;
      document.getElementById("num-cut").textContent = cutAbs;
      document.getElementById("num-total").textContent = total;

      // 下一頁
      bindPressSwap(
        "#btn-confirm-4",
        "./image/check_on.png",
        "./image/check_off.png",
        () => {
          location.href = "./level3_05.html";
        }
      );
    </script>
  </body>
</html>
